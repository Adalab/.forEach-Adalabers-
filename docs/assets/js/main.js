"use strict";let dataBack={palette:"",typography:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:"",skills:[]},saveData=JSON.parse(localStorage.getItem("dataBackLocal"));function saveDates(){localStorage.setItem("dataBackLocal",JSON.stringify(dataBack))}function printLocalStorage(){saveData&&(dataBack=saveData);let e=document.querySelector(".userInfo__name");const t=document.querySelector("#name");let n=saveData.name;t.value=n,e.innerHTML=n;let a=document.querySelector(".userInfo__job");const l=document.querySelector("#job");let r=saveData.job;l.value=r,a.innerHTML=r;const o=document.querySelector(".image-preview__file"),i=document.querySelector(".image-preview-small");let s=saveData.photo;o.style.backgroundImage=`url(${s})`,i.style.backgroundImage=`url(${s})`;let d=document.querySelector(".email");const u=document.querySelector("#email");let c=saveData.email;u.value=c,d.href=`mailto:${c}`;let m=document.querySelector(".mobile");const p=document.querySelector("#phone");let h=saveData.phone;p.value=h,m.href=h;let b=document.querySelector(".linkedin");const g=document.querySelector("#linkedin");let k=saveData.linkedin;g.value=k,b.href=`https://linkedin.com/in/${k}`;let f=document.querySelector(".github");const v=document.querySelector("#github");let L=saveData.github;v.value=L,f.href=`https://github.com/${L}`;const S=document.querySelector("#box"),y=["box__card","box__card--red","box__card--grey","box__card--purple","box__card--orange"];let E=saveData.palette-1,I=y[E];!function(){for(let e=0;e<y.length;e++)S.classList.remove(y[e])}(),S.classList.add("box__card"),S.classList.add(I);const q=document.querySelector("#userInfo"),_=["userInfo--ubuntu","userInfo--quaternary","userInfo--mont","userInfo--hand","userInfo--libre"];let w=saveData.typography-1,C=_[w];console.log("classTyp",C),console.log("valueTyp",w),function(){for(let e=0;e<_.length;e++)q.classList.remove(_[e])}(),q.classList.add("userInfo"),q.classList.add(C)}window.addEventListener("load",printLocalStorage);const inputName=document.querySelector("#name"),nameCard=document.querySelector(".userInfo__name");function handlerInputName(){let e=inputName.value;""===inputName.value?nameCard.innerHTML="Nombre Apellido":(nameCard.innerHTML=e,dataBack.name=e,saveDates())}inputName.addEventListener("keyup",handlerInputName),inputName.addEventListener("blur",handlerInputName),inputName.addEventListener("change",handlerInputName),inputName.addEventListener("keydown",handlerInputName);const inputJob=document.querySelector("#job"),jobCard=document.querySelector(".userInfo__job");function handlerInputJob(){let e=inputJob.value;""===inputJob.value?jobCard.innerHTML="Front-end developer":(jobCard.innerHTML=e,dataBack.job=e,saveDates())}inputJob.addEventListener("keyup",handlerInputJob),inputJob.addEventListener("blur",handlerInputJob),inputJob.addEventListener("change",handlerInputJob),inputJob.addEventListener("keydown",handlerInputJob);const inputEmail=document.querySelector("#email"),emailCard=document.querySelector(".email");function handlerInputEmail(){let e=inputEmail.value;emailCard.href=`mailto:${e}`,dataBack.email=e,saveDates()}inputEmail.addEventListener("keyup",handlerInputEmail),inputEmail.addEventListener("blur",handlerInputEmail),inputEmail.addEventListener("change",handlerInputEmail),inputEmail.addEventListener("keydown",handlerInputEmail);const inputGithub=document.querySelector("#github"),GithubCard=document.querySelector(".github");function handlerInputGithub(){let e=inputGithub.value;GithubCard.href=`https://github.com/${e}`,dataBack.github=e,saveDates()}inputGithub.addEventListener("keyup",handlerInputGithub),inputGithub.addEventListener("blur",handlerInputGithub),inputGithub.addEventListener("change",handlerInputGithub),inputGithub.addEventListener("keydown",handlerInputGithub);const inputLinkedin=document.querySelector("#linkedin"),LinkedinCard=document.querySelector(".linkedin");function handlerInputLinkedin(){let e=inputLinkedin.value;LinkedinCard.href=`https://linkedin.com/in/${e}`,dataBack.linkedin=e,saveDates()}inputLinkedin.addEventListener("keyup",handlerInputLinkedin),inputLinkedin.addEventListener("blur",handlerInputLinkedin),inputLinkedin.addEventListener("change",handlerInputLinkedin),inputLinkedin.addEventListener("keydown",handlerInputLinkedin);const inputPhone=document.querySelector("#phone"),phoneCard=document.querySelector(".mobile");function handlerInputMobile(){let e=inputPhone.value;phoneCard.href=`tel: +34 ${e}`,dataBack.phone=e,saveDates()}inputPhone.addEventListener("keyup",handlerInputMobile);const designElement=document.querySelector(".design-card__options"),buttonDesignElement=document.querySelector(".title-dropdown"),fillElement=document.querySelector(".form"),buttonFillElement=document.querySelector(".title-dropdown-fill"),shareElement=document.querySelector(".container-share"),buttonShareElement=document.querySelector(".container-title"),arrowDesignElement=document.querySelector(".arrowD"),arrowFillElement=document.querySelector(".arrowF"),arrowShareElement=document.querySelector(".arrowSa");function handlerHidden(e){const t=e.currentTarget;t===buttonDesignElement?(designElement.classList.toggle("hidden"),arrowDesignElement.classList.contains("fa-chevron-up")?(arrowDesignElement.classList.remove("fa-chevron-up"),arrowDesignElement.classList.add("fa-chevron-down")):(arrowDesignElement.classList.remove("fa-chevron-down"),arrowDesignElement.classList.add("fa-chevron-up")),fillElement.classList.add("hidden"),shareElement.classList.add("hidden")):t===buttonFillElement?(fillElement.classList.toggle("hidden"),arrowFillElement.classList.toggle("fa-chevron-up"),shareElement.classList.add("hidden"),designElement.classList.add("hidden")):(shareElement.classList.toggle("hidden"),arrowShareElement.classList.toggle("fa-chevron-up"),designElement.classList.add("hidden"),fillElement.classList.add("hidden"))}buttonDesignElement.addEventListener("click",handlerHidden),buttonFillElement.addEventListener("click",handlerHidden),buttonShareElement.addEventListener("click",handlerHidden);const boxCard=document.querySelector("#box"),palettesOption=document.querySelector(".design-card__colors__select-palette"),palettes={paletteRed:"box__card--red",paletteGrey:"box__card--grey",palettePurple:"box__card--purple",paletteOrange:"box__card--orange",paletteGreen:"box__card"};let AllPalettes=Object.values(palettes);function removeClass(){for(let e=0;e<AllPalettes.length;e++)boxCard.classList.remove(AllPalettes[e])}function handlerPalette(e){let t=e.target.getAttribute("data-palette"),n=e.target.getAttribute("value"),a=palettes[t];removeClass(),boxCard.classList.add("box__card"),boxCard.classList.add(a),boxCard.setAttribute("value",n),dataBack.palette=parseInt(n),saveDates()}palettesOption.addEventListener("click",handlerPalette);const fr=new FileReader,uploadBtn=document.querySelector(".image-link"),fileField=document.querySelector("#img-selector"),profileImage=document.querySelector(".image-preview__file"),profileImageSmall=document.querySelector(".image-preview-small");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t),document.querySelector(".img").classList.add("imgWhite")}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profileImageSmall.style.backgroundImage=`url(${fr.result})`,dataBack.photo=fr.result,saveDates()}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage),uploadBtn.addEventListener("click",fakeFileClick);const boxFont=document.querySelector("#userInfo"),fontOption=document.querySelector(".design-Card__colors__select-font"),fonts={Ubuntu:"userInfo--ubuntu",ComicSans:"userInfo--quaternary",Montserrat:"userInfo--mont",Indie:"userInfo--hand",Baskerville:"userInfo--libre"};let allFontsClass=Object.values(fonts);function removeClassFont(){for(let e=0;e<allFontsClass.length;e++)boxFont.classList.remove(allFontsClass[e])}function handlerFonts(e){let t=e.target.getAttribute("data-font"),n=e.target.getAttribute("value"),a=fonts[t];removeClassFont(),boxFont.classList.add("userInfo"),boxFont.classList.add(a),dataBack.typography=parseInt(n),saveDates()}fontOption.addEventListener("click",handlerFonts);const listItems=document.querySelectorAll(".list__item-skills"),containerSkills=document.querySelector(".container-skills"),allSkillsInputs=document.querySelectorAll(".checkbox-input"),cardListSkills=document.querySelector(".list__skills");let contentListSkills="";function onlyThreeCheckBox(){const e=3;function t(t){let n=t.target,a=0;for(let e=0;e<allSkillsInputs.length;e++)a+=allSkillsInputs[e].checked?1:0;a>e&&(n.checked=!1)}for(let e=0;e<allSkillsInputs.length;e++)allSkillsInputs[e].addEventListener("click",t)}function printSkill(){cardListSkills.innerHTML="";let e="",t="",n=[],a=-1;for(let l=0;l<allSkillsInputs.length;l++)!0===allSkillsInputs[l].checked&&(n[a+=1]=allSkillsInputs[l].value,t+=e=`<li class="list__item-skills">${allSkillsInputs[l].value}</li>`,cardListSkills.innerHTML=`${t}`,dataBack.skills=n)}function handlerClickSkill(){onlyThreeCheckBox(),printSkill()}cardListSkills.innerHTML="",containerSkills.addEventListener("click",handlerClickSkill);const submitEl=document.querySelector(".button-create");function handlerSubmit(){const e=document.querySelector(".loading");e.innerHTML="Estamos creando tu tarjeta...",fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(dataBack),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(t=>{e.innerHTML="";let n=t.cardURL;const a=document.querySelector(".link-profile-card");a.innerHTML=n,a.href=`${n}`,document.querySelector(".share-twitter").href=`https://twitter.com/intent/tweet?text=Mira%20mi%20tarjeta%20${n}`,document.querySelector(".container-hide-section").classList.remove("hidden"),submitEl.classList.add("clicked"),console.log(n)}).catch(e=>console.log(e))}submitEl.addEventListener("click",handlerSubmit);